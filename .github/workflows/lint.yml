name: Linter

on:
  pull_request:
    branches: [develop, master]
    types: [opened, reopened, edited]

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          ref: ${{ github.ref }}
      
      - name: Setup Python
        uses: actions/setup-python@v1
        with:
          python-version: 3.9.13
          architecture: x64

      - name: flake8 Lint
        uses: py-actions/flake8@v2
        with:
          ignore: "F403"
          max-line-length: "120"
          exclude: |
            (?x)^(
                ^api/migrations/0001_initial.py|
                api/admin.py|
                api/tests.py|
                config/settings/dev.py|
                config/settings/prd.py
            )$
